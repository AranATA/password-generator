var generateBtn = document.querySelector("#generate");

var passLength;
var userLower;
var userUpper;
var userNumber;
var userSpecial;

var lowerCharacter = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];

var upperCharacter = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];

var number = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];

var special = [']', ' ', '!', '"', '#', '$', '%', '&', '\'', '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', '\', ^', '_', '`', '{', '|', '}', '~'];

var finalCharacters = '';


function generatePassword() {
  
// all array combinations that will generated by user input are defined below.

  var array = [];
 
  if (userLower && userUpper && userNumber && userSpecial) {array = lowerCharacter.concat(upperCharacter, number, special);
  }

 
  else if (userLower && userUpper && userNumber) {array = lowerCharacter.concat(upperCharacter, number);
  }
  else if (userLower && userUpper && userSpecial) {array = lowerCharacter.concat(upperCharacter, special);
  }
  else if (userLower && userNumber && userSpecial) {array = lowerCharacter.concat(number, special);
  }
  else if (userUpper && userNumber && userSpecial) {array = upperCharacter.concat(number, special);
  }


  else if (userLower && userUpper) {array = lowerCharacter.concat(upperCharacter);
  }
  else if (userLower && userNumber) {array = lowerCharacter.concat(number);
  }
  else if (userLower && userSpecial) {array = lowerCharacter.concat(special);
  }
  else if (userUpper && userNumber) {array = upperCharacter.concat(number);
  }
  else if (userUpper && userSpecial) {array = upperCharacter.concat(special);
  }
  else if (userNumber && userSpecial) {array = number.concat(special);
  }


  else if (userLower) {array = lowerCharacter;
  }
  else if (userUpper) {array = upperCharacter;
  }
  else if (userNumber) {array = number;
  }
  else if (userSpecial) {array = special;
  } 

  // now a random index number is picked by the function through the length of the array defined above. 

  function getRandom() {
    return array[Math.floor(Math.random()*array.length)];
  }

  // then that process is repeated till the total number of password characters is reached.  

  for ( var i = 0; i < passLength; i++ ) {
    finalCharacters += getRandom();
  }
  
  // and the final set of characters are stored in this variable.
  return finalCharacters;
}


  // An event is assigned to the button on the screen and when clicked it calls for the function that displays the questions and store the answers.
generateBtn.addEventListener("click", writePassword);

function writePassword() {
  
  passLengthStr = prompt("Please enter the number of characters you want for your new password. It must be more than 12 and less than 128.");
  passLength = Number(passLengthStr);
  if (passLengthStr<12||passLengthStr>128){
    return writePassword();
  } 
  
  userLower = confirm("Do you want lowercase letters in your password?");
  userUpper = confirm("Do you want uppercase letters in your password?");
  userNumber = confirm("Do you want numbers in your password?");
  userSpecial = confirm("Do you want special characters in your password?");
  if (userLower === false && userUpper === false && userNumber === false && userSpecial === false) {
    return writePassword();
  }
  
  console.log(generatePassword());
  
  // this section links the generated password to the text area designated in the HTML.
  var passwordText = document.querySelector("#password");
  passwordText.value = finalCharacters;
}

// This is the second event assigned to the button on the screen. When the user sees the generated password and moves the mouse over to the button to get a new one, it triggers the function to reload the page. This not only clears the input window but also erases the first generated password from the console memory so that it will not reappear on the screen together with the second password.

generateBtn.addEventListener("mouseover", clicknumber);

var mouseOverButton = 0;

function clicknumber() {
  mouseOverButton += 1;
  if (mouseOverButton === 2){
    location.reload();
  }
}